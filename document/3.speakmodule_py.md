말하는 기능
======

speakmodule.py의 기능을 다룬다.

우선 필요한 라이브러리들을 설치해주자.

  import os
  import sys
  from google.cloud import texttospeech
  from playsound import playsound # 음성 재생을 위해 playsound 사용
  import tempfile # 임시 파일 생성을 위해 필요
  import time
  import json

버전은 기억이 나지 않지만 이 라이브러리들을 설치하자.

  if getattr(sys, 'frozen', False):
      BASE_DIR = sys._MEIPASS
  else:
      BASE_DIR = os.path.dirname(os.path.abspath(__file__))
  
  KEY = os.path.join(BASE_DIR, "boss-tts-key.json")
  os.environ['GOOGLE_APPLICATION_CREDENTIALS'] = KEY

이것은 키의 파일 경로를 지정해주는 것이다. 앱에서 오류가 일어나지 않도록 모든 파일을 불러올때는 항상 이런 형태의 절대경로 지정을 해줘야한다. AI가 짜줘서 사실 잘 모르겠다.

이제 말하기 함수를 살펴보자.

  def speak(text):
      setting = json.load(open(os.path.join(BASE_DIR, 'setting.json')))
      gender_str = setting['gender'].upper()
      ssml_gender_enum = getattr(texttospeech.SsmlVoiceGender, gender_str)
      temp_file_path = None

